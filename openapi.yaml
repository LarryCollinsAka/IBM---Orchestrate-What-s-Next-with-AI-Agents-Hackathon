openapi: 3.0.0
info:
  title: "AgroSphere Super-Agent Skills"
  version: "1.0.0" 
  description: "A supervisor API that provides internal processing data AND collaborates with an external research agent for planting, harvesting, and storage."

servers:
  - url: https://ibm-orchestrate-what-s-next-with-ai.vercel.app
    description: "AgroSphere Supervisor API (Vercel)"

paths:
  # --- INTERNAL SKILLS ---
  /process:
    get:
      summary: "Get Local Crop Processing Options"
      description: "Gets localized processing options, profit, and equipment for a specific crop and country."
      operationId: "getProcessingOptions"
      parameters:
        - name: crop_name
          in: query
          required: true
          schema: { "type": "string" }
          description: "The name of the raw crop (e.g., 'Cassava', 'Maize', 'Rice')."
        - name: country
          in: query
          required: true
          schema: { "type": "string" }
          description: "The country of operation (e.g., 'Cameroon', 'Nigeria', 'India')."
      responses:
        '200':
          description: "A list of localized processing options."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProcessingOption" 

  /finance:
    get:
      summary: "Find Local Equipment Financing"
      description: "Given a COUNTRY, finds local micro-finance (MFI) and digital inclusion options."
      operationId: "getFinanceOptions"
      parameters:
        - name: country
          in: query
          required: true
          schema: { "type": "string" }
          description: "The country to search for financing in (e.g., 'Cameroon', 'Nigeria', 'India')."
      responses:
        '200':
          description: "A list of localized financing options."
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/FinanceOption" 

  /market:
    get:
      summary: "Get Local Market Price for Processed Good"
      description: "Given a processed product and COUNTRY, gets the current market price in local currency."
      operationId: "getMarketPrice"
      parameters:
        - name: product_name
          in: query
          required: true
          schema: { "type": "string" }
          description: "The name of the processed product (e.g., 'Gari', 'Puffed Rice')."
        - name: country
          in: query
          required: true
          schema: { "type": "string" }
          description: "The country to get the price for (e.g., 'Cameroon', 'Nigeria', 'India')."
      responses:
        '200':
          description: "Market price and buyer information in local currency."
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MarketData"
  
  # --- COLLABORATOR (ADVISOR) SKILLS ---
  /planting-advice:
    get:
      summary: "Get Expert Planting Advice"
      description: "Gets expert advice on planting, climate, and land use from the 'Research Advisor' agent."
      operationId: "getPlantingAdvice"
      parameters:
        - name: query
          in: query
          required: true
          schema: { "type": "string" }
          description: "The farmer's full question (e.g., 'What is the best season for planting plantains in Cameroon?')"
      responses:
        '200':
          description: "The expert advice."
          content:
            application/json:
              schema: { $ref: "#/components/schemas/AdvisorResponse" }
  
  /harvesting-advice:
    get:
      summary: "Get Expert Harvesting Advice"
      description: "Gets expert advice on harvesting techniques from the 'Research Advisor' agent."
      operationId: "getHarvestingAdvice"
      parameters:
        - name: query
          in: query
          required: true
          schema: { "type": "string" }
          description: "The farmer's full question (e.g., 'How do I harvest yams properly?')"
      responses:
        '200':
          description: "The expert advice."
          content:
            application/json:
              schema: { $ref: "#/components/schemas/AdvisorResponse" }

  /storage-advice:
    get:
      summary: "Get Expert Storage Advice"
      description: "Gets expert advice on storage techniques from the 'Research Advisor' agent."
      operationId: "getStorageAdvice"
      parameters:
        - name: query
          in: query
          required: true
          schema: { "type": "string" }
          description: "The farmer's full question (e.g., 'How do I store yams to prevent rot?')"
      responses:
        '200':
          description: "The expert advice."
          content:
            application/json:
              schema: { $ref: "#/components/schemas/AdvisorResponse" }

# 'components/schemas'
components:
  schemas:
    ProcessingOption:
      type: object
      properties:
        option_name: { "type": "string" }
        output_yield_kg: { "type": "integer" }
        equipment_needed: { "type": "string" }
        est_profit_local: { "type": "string" }
        local_currency_code: { "type": "string" }
    FinanceOption:
      type: object
      properties:
        funder_name: { "type": "string" }
        loan_details: { "type": "string" }
        contact_url: { "type": "string" }
    MarketData:
      type: object
      properties:
        product: { "type": "string" }
        current_price_local: { "type": "string" }
        local_currency_code: { "type": "string" }
        top_buyer: { "type": "string" }
    AdvisorResponse:
      type: object
      properties:
        advice:
          type: string
        source:
          type: string
        error:
          type: string